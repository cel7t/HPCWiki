"use strict";(self.webpackChunkhpc_wiki=self.webpackChunkhpc_wiki||[]).push([[9390],{3905:(e,a,t)=>{t.d(a,{Zo:()=>u,kt:()=>h});var n=t(7294);function o(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){o(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function i(e,a){if(null==e)return{};var t,n,o=function(e,a){if(null==e)return{};var t,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(o[t]=e[t]);return o}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var p=n.createContext({}),c=function(e){var a=n.useContext(p),t=a;return e&&(t="function"==typeof e?e(a):l(l({},a),e)),t},u=function(e){var a=c(e.components);return n.createElement(p.Provider,{value:a},e.children)},d="mdxType",s={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},m=n.forwardRef((function(e,a){var t=e.components,o=e.mdxType,r=e.originalType,p=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=c(t),m=o,h=d["".concat(p,".").concat(m)]||d[m]||s[m]||r;return t?n.createElement(h,l(l({ref:a},u),{},{components:t})):n.createElement(h,l({ref:a},u))}));function h(e,a){var t=arguments,o=a&&a.mdxType;if("string"==typeof e||o){var r=t.length,l=new Array(r);l[0]=m;var i={};for(var p in a)hasOwnProperty.call(a,p)&&(i[p]=a[p]);i.originalType=e,i[d]="string"==typeof e?e:o,l[1]=i;for(var c=2;c<r;c++)l[c]=t[c];return n.createElement.apply(null,l)}return n.createElement.apply(null,t)}m.displayName="MDXCreateElement"},7465:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>p,contentTitle:()=>l,default:()=>s,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var n=t(7462),o=(t(7294),t(3905));const r={sidebar_position:2,sidebar_label:"CUDA",hide_table_of_contents:!0,hide_title:!0,pagination_next:null,pagination_prev:null,title:"CUDA",draft:!1},l=void 0,i={unversionedId:"faq/software/cuda",id:"faq/software/cuda",title:"CUDA",description:"CUDA",source:"@site/docs/faq/software/cuda.mdx",sourceDirName:"faq/software",slug:"/faq/software/cuda",permalink:"/docs/faq/software/cuda",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,sidebar_label:"CUDA",hide_table_of_contents:!0,hide_title:!0,pagination_next:null,pagination_prev:null,title:"CUDA",draft:!1},sidebar:"FAQ"},p={},c=[{value:"CUDA",id:"cuda",level:2},{value:"What is CUDA? Does Sharanga have GPU nodes supporting CUDA?",id:"what-is-cuda-does-sharanga-have-gpu-nodes-supporting-cuda",level:3},{value:"What are the available GPU partitions?",id:"what-are-the-available-gpu-partitions",level:3},{value:"How to compile a CUDA C, C++, or Fortran code?",id:"how-to-compile-a-cuda-c-c-or-fortran-code",level:3},{value:"How to compile a CUDA Python code?",id:"how-to-compile-a-cuda-python-code",level:3},{value:"Numba",id:"numba",level:4},{value:"PyCUDA",id:"pycuda",level:4},{value:"CuPy",id:"cupy",level:4},{value:"How to compile a CUDA Julia code?",id:"how-to-compile-a-cuda-julia-code",level:3}],u={toc:c},d="wrapper";function s(e){let{components:a,...t}=e;return(0,o.kt)(d,(0,n.Z)({},u,t,{components:a,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"cuda"},"CUDA"),(0,o.kt)("h3",{id:"what-is-cuda-does-sharanga-have-gpu-nodes-supporting-cuda"},"What is CUDA? Does Sharanga have GPU nodes supporting CUDA?"),(0,o.kt)("p",null,"CUDA is a parallel computing platform developed by NVIDIA. The HPC facility has nodes that support CUDA based GPU acceleration."),(0,o.kt)("h3",{id:"what-are-the-available-gpu-partitions"},"What are the available GPU partitions?"),(0,o.kt)("p",null,"We have configured GPU (CUDA) enabled partitions with the prefix ",(0,o.kt)("inlineCode",{parentName:"p"},"gpu_"),". You can view the list of partitions by running the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ scontrol show partitions | grep Name=gpu_\n")),(0,o.kt)("p",null,"You may see the following output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"PartitionName=gpu_v100_1\nPartitionName=gpu_v100_2\nPartitionName=gpu_a100_8\n")),(0,o.kt)("h3",{id:"how-to-compile-a-cuda-c-c-or-fortran-code"},"How to compile a CUDA C, C++, or Fortran code?"),(0,o.kt)("p",null,"A CUDA C, C++, or Fortran code can be compiled using NVIDIA HPC Software Development Kit (SDK). The NVIDIA HPC SDK is a set of tools and libraries that enable you to develop and run applications targetting NVIDIA's CUDA architecture on HPC clusters."),(0,o.kt)("p",null,"To compile programs using the NVIDIA HPC SDK, load the appropriate ",(0,o.kt)("inlineCode",{parentName:"p"},"nvhpc")," module. Currently, we have multiple versions of the ",(0,o.kt)("inlineCode",{parentName:"p"},"nvhpc")," module installed on Sharanga. Use the following command to view the list of available ",(0,o.kt)("inlineCode",{parentName:"p"},"nvhpc")," modules:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ spack find nvhpc\n")),(0,o.kt)("p",null,"Load the appropriate ",(0,o.kt)("inlineCode",{parentName:"p"},"nvhpc")," module along with its version. For example, to load the ",(0,o.kt)("inlineCode",{parentName:"p"},"nvhpc")," module for version ",(0,o.kt)("inlineCode",{parentName:"p"},"22.3"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ spack load nvhpc@22.3\n")),(0,o.kt)("p",null,"The NVIDIA HPC SDK is now loaded into your environment. You can now compile your CUDA C, C++, or Fortran applications using their respective compilers."),(0,o.kt)("p",null,"We have provided an equivalent GNU Compiler command for reference."),(0,o.kt)("div",{className:"content-center"},(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:"center"},"NVHPC Compiler Collection"),(0,o.kt)("th",{parentName:"tr",align:"center"},"GNU Compiler Collection"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"nvc"),(0,o.kt)("td",{parentName:"tr",align:"center"},"gcc")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"nvc++"),(0,o.kt)("td",{parentName:"tr",align:"center"},"g++")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"nvfortran"),(0,o.kt)("td",{parentName:"tr",align:"center"},"gfortran"))))),(0,o.kt)("p",null,"For example to compile a C CUDA application ",(0,o.kt)("inlineCode",{parentName:"p"},"sample.cu")," using NVHPC C compiler ",(0,o.kt)("inlineCode",{parentName:"p"},"nvc"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ nvc sample.cu\n")),(0,o.kt)("h3",{id:"how-to-compile-a-cuda-python-code"},"How to compile a CUDA Python code?"),(0,o.kt)("p",null,"A CUDA Python code can be compiled using any of the following Python packages:"),(0,o.kt)("h4",{id:"numba"},"Numba"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://numba.pydata.org/"},"Numba")," is a high-performance JIT compiler for Python that supports compiling Python code to CUDA. Since there are multiple versions of Numba compiler we have not installed them globally. Instead, we recommend users to install the required version of Numba locally from Anaconda 3. The following command will install Numba in your Anaconda environment (For details on Anaconda installation, please refer to the ",(0,o.kt)("a",{parentName:"p",href:"/docs/faq/software/anaconda"},"Anaconda")," page):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ conda install numba cudatoolkit\n")),(0,o.kt)("p",null,"You should now be able to run your CUDA Python codes using Numba."),(0,o.kt)("h4",{id:"pycuda"},"PyCUDA"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://documen.tician.de/pycuda/"},"PyCUDA")," is a wrapper for the CUDA API. It allows you to write CUDA C++ code and directly import it in your Python code. We recommend installing PyCUDA from Anaconda 3. The following command will install PyCUDA in your Anaconda environment:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ conda install -c conda-forge pycuda\n")),(0,o.kt)("h4",{id:"cupy"},"CuPy"),(0,o.kt)("p",null,"If your project involves a significant usage of NumPy and SciPy, we recommend you to use ",(0,o.kt)("a",{parentName:"p",href:"https://cupy.dev/"},"CuPy"),". CuPy provides a dropdown replacement to NumPy and SciPy, which is optimized for GPU acceleration. We recommend installing CuPy from Anaconda 3. The following command will install CuPy in your Anaconda environment:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ conda install -c conda-forge cupy\n")),(0,o.kt)("h3",{id:"how-to-compile-a-cuda-julia-code"},"How to compile a CUDA Julia code?"),(0,o.kt)("p",null,"A CUDA Julia code can be compiled using ",(0,o.kt)("inlineCode",{parentName:"p"},"CUDA.jl"),". ",(0,o.kt)("a",{parentName:"p",href:"https://juliagpu.org/"},"CUDA.jl")," is a Julia package providing a programming interface for targeting CUDA. You can install CUDA.jl from the Julia REPL. Type ",(0,o.kt)("inlineCode",{parentName:"p"},"]")," to enter the Pkg REPL mode and run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"pkg> add CUDA\n")),(0,o.kt)("p",null,"Alternatively, from the Julia REPL, you can install CUDA.jl by running the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'julia> import Pkg; Pkg.add("CUDA")\n')))}s.isMDXComponent=!0}}]);